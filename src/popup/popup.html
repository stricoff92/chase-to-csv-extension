<!DOCTYPE html>
<html>
    <head>
        <style>
            body {
                font-family: arial;
                background-color: #0a0054;
                color: #ffffff;
                min-width: 400px;
                min-height: 400px;
                padding: 8px;
            }
            .hidden {
                display: none;
            }
            .popup-container {
                margin: 0.6rem;
                padding: 0.4rem;
                background-color: #0c0065;
                border-radius: 8px;
            }
            a {
                color: white;
            }
            .form-row {
                margin: 0.5rem;
            }
            .form-label {
                font-style: italic;
                font-size: 1rem;
                color: #ffac39;
                font-weight: bold;
            }
            #start-scrape-error-area {
                color: red;
                font-weight: bold;
                font-size: 125%;
                padding: 8px;
                background-color: #ffd6d6;
                border: 1px solid red;
            }
            #progress-bar {
                height: 35px;
                width: 100%;

            }
            #debug-message {
                color: white;
                font-size: 150%;
            }
            #new-scrape-row-desc-filter {
                width: 100%;
            }
            #new-scrape-acc-desc-filter {
                width: 100%;
            }
            #new-scrape-csv-columns {
                width: 100%
            }
            #advanced-options-container {
                display: none;
            }
            #start-scrape-btn {
                margin-top: 0.6rem;
                font-weight: bold;
                font-size: 150%;
                background-color:#d1cbff;
                color:#0a0054;
                border-radius: 10px;
                padding:12px;
                cursor: pointer;
            }
            #start-scrape-btn:hover {
                cursor: pointer;
                background-color:#b3a9ff;
                color:#0a0054;
            }
            #start-health-check-btn {
                margin-top: 0.6rem;
                font-weight: bold;
                font-size: 150%;
                background-color:#d1cbff;
                color:#0a0054;
                border-radius: 10px;
                padding:12px;
                cursor: pointer;
            }
            #start-health-check-btn:hover {
                cursor: pointer;
                background-color:#b3a9ff;
                color:#0a0054;
            }
            .lds-ring {
                display: inline-block;
                position: relative;
                width: 80px;
                height: 80px;
            }
            .lds-ring div {
                box-sizing: border-box;
                display: block;
                position: absolute;
                width: 50px;
                height: 50px;
                margin: 8px;
                border: 12px solid #fff;
                border-radius: 50%;
                animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
                border-color: #fff transparent transparent transparent;
            }
            .lds-ring div:nth-child(1) {
                animation-delay: -0.45s;
            }
            .lds-ring div:nth-child(2) {
                animation-delay: -0.3s;
            }
            .lds-ring div:nth-child(3) {
                animation-delay: -0.15s;
            }
            @keyframes lds-ring {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

        </style>
        <script src="popup.js">
        </script>
    </head>
    <body>
        <h1>
            Chase / Accounting
        </h1>
        <div class="popup-container">
            <a id="view-accounts-anchor" href="#">View Accounts</a>
        </div>
        <div id="reset-btn-container" class="popup-container hidden">
            <button id="reset-on-page-btn">Reset</button>
        </div>
        <div id="page-not-found-container" class="popup-container hidden">
            <h3>Not on Account Page</h3>
        </div>
        <div id="page-found-container" class="popup-container hidden">
            <div style="display:flex; justify-content:space-between; margin-bottom: 1rem;">
                <button id="start-health-check-btn">
                    Run Health Check
                </button>
            </div>
            <hr>
            <h2>Start Bank Data Extraction</h2>
            <div id="start-scrape-error-area" class="form-row hidden">

            </div>
            <div class="form-row">
                <span class="form-label">From</span><br/><input id="new-scrape-start-date-input" type="date">
            </div>
            <div class="form-row">
                <span class="form-label">To</span><br/><input id="new-scrape-end-date-input" type="date">
            </div>
            <div class="form-row">
                <span class="form-label">Plug Account ID</span><br/>
                <input id="new-scrape-plug-account-input" type="text">
            </div>
            <div id="show-advanced-options-container" class="form-row">
                <a id="show-advanced-options-anchor" href="#">
                    advanced options
                </a>
            </div>
            <div id="advanced-options-container">
                <div class="form-row">
                    <span class="form-label">CSV Columns</span><br/>
                    <textarea id="new-scrape-csv-columns" spellcheck="false"></textarea>
                </div>
                <div class="form-row">
                    <span class="form-label">Transaction Filters</span><br/>
                    <textarea id="new-scrape-row-desc-filter" spellcheck="false"></textarea>
                </div>
                <div class="form-row">
                    <span class="form-label">Account Filters</span><br/>
                    <textarea id="new-scrape-acc-desc-filter" spellcheck="false"></textarea>
                </div>
                <div class="form-row">
                    <span class="form-label">Max Accounts</span><br/>
                    <input value="1000" type="number" id="start-scrape-max-rows-input">
                </div>
            </div>
            <div class="form-row">
                <button id="start-scrape-btn">
                    Build CSV
                </button>
            </div>
        </div>
        <div id="scrape-running-container" class="popup-container hidden">
            <h2>Running</h2>
            <div style="text-align: center;">
                <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
            </div>
            <div class="form-row">
                <button id="cancel-crawl-btn">
                    Cancel
                </button>
            </div>
            <div id="progress-container">
                <progress id="progress-bar"></progress>
            </div>
            <div>
                <p id="debug-message">
                </p>
            </div>
        </div>
      </body>
</html>